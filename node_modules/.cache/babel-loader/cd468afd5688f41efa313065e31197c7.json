{"remainingRequest":"/home/arthur/dev/js/Smoothie/node_modules/thread-loader/dist/cjs.js!/home/arthur/dev/js/Smoothie/node_modules/babel-loader/lib/index.js!/home/arthur/dev/js/Smoothie/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/arthur/dev/js/Smoothie/src/components/utils/FileList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/arthur/dev/js/Smoothie/src/components/utils/FileList.vue","mtime":1536003969244},{"path":"/home/arthur/dev/js/Smoothie/node_modules/cache-loader/dist/cjs.js","mtime":1535381333659},{"path":"/home/arthur/dev/js/Smoothie/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/arthur/dev/js/Smoothie/node_modules/babel-loader/lib/index.js","mtime":1534881725000},{"path":"/home/arthur/dev/js/Smoothie/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'FileList',\n  data: function data() {\n    return {\n      file_list: [],\n      error: ''\n    };\n  },\n  props: {\n    path: String\n  },\n  mounted: function mounted() {\n    var that = this;\n    machine.communication.on_connected.push(function () {\n      machine.files.list(that.path).then(function (files) {\n        that.error = '';\n        that.file_list = files;\n      }).catch(function (why) {\n        that.error = why;\n      });\n    });\n  },\n  watch: {\n    '$route': function $route() {\n      var that = this;\n      machine.files.list(that.path).then(function (files) {\n        that.error = '';\n        that.file_list = files;\n      }).catch(function (why) {\n        that.error = why;\n      });\n    }\n  },\n  computed: {\n    steps: function steps() {\n      var done = [];\n      var result = [];\n      var short_path = this.path.replace(/(^\\/|\\/$)/g, '').split('/');\n      short_path.forEach(function (item) {\n        done.push(item);\n        result.push({\n          path: done.join('/'),\n          name: item,\n          last: short_path.length == result.length + 1\n        });\n      });\n      return result;\n    }\n  }\n};",{"version":3,"sources":["FileList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,eAAA;AACA,QAAA,UADA;AAEA,MAFA,kBAEA;AAAA,WAAA;AACA,iBAAA,EADA;AAEA,aAAA;AAFA,KAAA;AAGA,GALA;AAMA,SAAA;AAAA,UAAA;AAAA,GANA;AAOA,SAPA,qBAOA;AACA,QAAA,OAAA,IAAA;AACA,YAAA,aAAA,CAAA,YAAA,CAAA,IAAA,CAAA,YAAA;AACA,cAAA,KAAA,CAAA,IAAA,CAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AAAA,aAAA,KAAA,GAAA,EAAA;AAAA,aAAA,SAAA,GAAA,KAAA;AAAA,OAAA,EAAA,KAAA,CAAA,UAAA,GAAA,EAAA;AAAA,aAAA,KAAA,GAAA,GAAA;AAAA,OAAA;AACA,KAFA;AAGA,GAZA;AAaA,SAAA;AACA,YADA,oBACA;AACA,UAAA,OAAA,IAAA;AACA,cAAA,KAAA,CAAA,IAAA,CAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AAAA,aAAA,KAAA,GAAA,EAAA;AAAA,aAAA,SAAA,GAAA,KAAA;AAAA,OAAA,EAAA,KAAA,CAAA,UAAA,GAAA,EAAA;AAAA,aAAA,KAAA,GAAA,GAAA;AAAA,OAAA;AACA;AAJA,GAbA;AAmBA,YAAA;AACA,WAAA,iBAAA;AACA,UAAA,OAAA,EAAA;AAAA,UAAA,SAAA,EAAA;AACA,UAAA,aAAA,KAAA,IAAA,CAAA,OAAA,CAAA,YAAA,EAAA,EAAA,EAAA,KAAA,CAAA,GAAA,CAAA;AACA,iBAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AAAA,aAAA,IAAA,CAAA,IAAA;AAAA,eAAA,IAAA,CAAA;AAAA,gBAAA,KAAA,IAAA,CAAA,GAAA,CAAA;AAAA,gBAAA,IAAA;AAAA,gBAAA,WAAA,MAAA,IAAA,OAAA,MAAA,GAAA;AAAA,SAAA;AAAA,OAAA;AACA,aAAA,MAAA;AACA;AANA;AAnBA,CAAA","sourcesContent":["<template>\n  <div class=\"filelist\">\n    <div v-if=\"error\" class=\"callout callout-danger\">\n      <h4> <i class=\"fas fa-exclamation-circle fa-fw fa-lg\"></i> Error </h4>\n      <p> {{error}} </p>\n    </div>\n    <div v-else>\n      <table class=\"table table-striped\">\n        <thead class='thead-dark'>\n        <tr>\n          <th style=\"width:30px;\"></th>\n          <th> File name </th>\n          <th style=\"width:100px;\"> Size </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"file in file_list\" v-bind:key=\"file.name\">\n            <td>\n              <div v-if=\"file.folder\">\n                <i class=\"fas fa-folder fa-fw fa-lg\"></i>\n              </div>\n              <div v-else>\n                <i v-if=\"file.name.match(/txt$/)\"              class=\"fas fa-file-word fa-fw fa-lg\"></i>\n                <i v-else-if=\"file.name.match(/^config/)\"      class=\"fas fa-file-signature fa-fw fa-lg\"></i>\n                <i v-else-if=\"file.name.match(/^firmware/)\"    class=\"fas fa-microchip fa-fw fa-lg\"></i>\n                <i v-else-if=\"file.name.match(/(nc|gcode)$/)\"  class=\"fas fa-file-code fa-fw fa-lg\"></i>\n                <i v-else-if=\"file.name.match(/(png|jpg)$/)\"   class=\"fas fa-file-image fa-fw fa-lg\"></i>\n                <i v-else-if=\"file.name.match(/(html)$/)\"      class=\"fas fa-file-invoice fa-fw fa-lg\"></i>\n                <i v-else                                      class=\"fas fa-file-alt fa-fw fa-lg\"></i>\n              </div>\n            </td>\n            <td v-if=\"file.folder\" class=\"filename\"> <router-link :to=\"{path: file.name + '/'}\">{{file.name}}</router-link> </td>\n            <td v-else             class=\"filename\"> <router-link :to=\"'/file' + file.path\">{{file.name}}</router-link> </td>\n            <td> {{file.size}} </td>\n        </tr>\n        </tbody>\n      </table>\n      <nav aria-label=\"breadcrumb\">\n        <ol class=\"breadcrumb\">\n          <li v-for=\"step in steps\" class=\"breadcrumb-item\" v-bind:key=\"step.name\" v-bind:class=\"{ active: step.last }\">\n            <span v-if=\"step.last\">\n              {{step.name}}\n            </span>\n            <span v-else>\n              <router-link :to=\"'/jobs/' + step.path + '/'\">{{step.name}}</router-link>\n            </span>\n          </li>\n        </ol>\n      </nav>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'FileList',\n  data(){ return {\n    file_list: [],\n    error: ''\n  }},\n  props:{path:String},\n  mounted(){\n    var that = this;\n    machine.communication.on_connected.push( () => {\n      machine.files.list(that.path).then((files) => { that.error = ''; that.file_list = files; }).catch((why) => { that.error = why; });\n    });\n  },\n  watch: {\n    '$route' () {\n      var that = this;\n      machine.files.list(that.path).then((files) => { that.error = ''; that.file_list = files; }).catch((why) => { that.error = why; });\n    }\n  },\n  computed: {\n    steps: function(){\n      var done = []; var result = [];\n      var short_path = this.path.replace(/(^\\/|\\/$)/g,'').split('/');\n      short_path.forEach((item) => { done.push(item); result.push({path:done.join('/'), name:item, last: short_path.length == result.length+1 }); });\n      return result;\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n.filename{\n  font-family: monospace;\n}\n</style>\n"],"sourceRoot":"src/components/utils"}]}